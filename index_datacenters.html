<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Data Center Visualization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet" />
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoib3JsYWxpbGkiLCJhIjoiY200Z3ZoMGF2MDBsMzJrc2lnazRrMGk0YyJ9.ItyjKYDOF1bF-Gu8lVPFHg';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/light-v10',
            center: [0, 0],
            zoom: 1.7
        });

        var datacenterCoords = [
        [35.696944444444, -0.63305555555556],
        [36.68083333, 2.90638889],
        [36.766666666667, 2.95],
        [36.68083333, 2.90638889],
        [-24.66118, 25.911751],
        [11.60047, 43.150829],
        [-4.3196982, 15.3424196],
        [-4.3196982, 15.3424196],
        [31.05, 31.383333333333],
        [30.0444444444444, 31.2358333333333],
        [30.0444444444444, 31.2358333333333],
        [30.0444444444444, 31.2358333333333],
        [29.987, 31.2118],
        [29.987, 31.2118],
        [29.987, 31.2118],
        [30.0444444444444, 31.2358333333333],
        [30.0444444444444, 31.2358333333333],
        [29.987, 31.2118],
        [29.987, 31.2118],
        [5.53333333333333, -0.216666666666667],
        [5.53333333333333, -0.216666666666667],
        [5.53333333333333, -0.216666666666667],
        [5.53333333333333, -0.216666666666667],
        [9.5170602, -13.6998434],
        [5.320357, -4.016107],
        [5.320357, -4.016107],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-1.2863888888889, 36.817222222222],
        [-4.05, 39.666666666667],
        [-4.05, 39.666666666667],
        [32.896672, 13.1777923],
        [-18.938611111111, 47.521388888889],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [-20.1624522, 57.5028044],
        [33.599166666667, -7.62],
        [35.7766666666667, -5.80388888888889],
        [35.7766666666667, -5.80388888888889],
        [-25.966213, 32.56745],
        [-24.686666666667, 33.530555555556],
        [-22.57, 17.083611111111],
        [-22.57, 17.083611111111],
        [9.0556, 7.4914],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [6.45, 3.4],
        [9.0555555555556, 7.4913888888889],
        [6.45, 3.4],
        [6.45, 3.4],
        [-20.939444444444, 55.287222222222],
        [-20.939444444444, 55.287222222222],
        [-20.878888888889, 55.448055555556],
        [-20.878888888889, 55.448055555556],
        [14.716667, -17.266667],
        [14.723888888889, -17.489166666667],
        [10.4386215, 45.0134007],
        [-29.858333333333, 31.025],
        [-29.858333333333, 31.025],
        [-29.858333333333, 31.025],
        [-33.936666666667, 18.861388888889],
        [-33.9252777777778, 18.4238888888889],
        [-33.9252777777778, 18.4238888888889],
        [-33.9252777777778, 18.4238888888889],
        [-33.9252777777778, 18.4238888888889],
        [-33.9252777777778, 18.4238888888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [-26.204361111111, 28.041638888889],
        [15.60308, 32.52654],
        [6.1319, 1.2228],
        [36.8008, 10.1800],
        [35.833333333333, 10.633333333333],
        [0.347596, 32.58252],
        [-15.416666666667, 28.283333333333],
        ];

        var datacenterCounts = [
        { latitude: -33.936666666667, longitude: 18.861388888889, count: 1.0 },
        { latitude: -33.9252777777778, longitude: 18.4238888888889, count: 7.0 },
        { latitude: -29.858333333333, longitude: 31.025, count: 3.0 },
        { latitude: -26.204361111111, longitude: 28.041638888889, count: 27.0 },
        { latitude: -25.966213, longitude: 32.56745, count: 1.0 },
        { latitude: -24.686666666667, longitude: 33.530555555556, count: 1.0 },
        { latitude: -24.66118, longitude: 25.911751, count: 1.0 },
        { latitude: -22.5700, longitude: 17.0836, count: 2.0 },
        { latitude: -20.939444444444, longitude: 55.287222222222, count: 2.0 },
        { latitude: -20.878888888889, longitude: 55.448055555556, count: 2.0 },
        { latitude: -20.1624522, longitude: 57.5028044, count: 9.0 },
        { latitude: -18.938611111111, longitude: 47.521388888889, count: 1.0 },
        { latitude: -15.416666666667, longitude: 28.283333333333, count: 1.0 },
        { latitude: -4.3196982, longitude: 15.3424196, count: 2.0 },
        { latitude: -4.05, longitude: 39.666666666667, count: 2.0 },
        { latitude: -1.2863888888889, longitude: 36.817222222222, count: 10.0 },
        { latitude: 5.320357, longitude: -4.016107, count: 2.0 },
        { latitude: 5.53333333333333, longitude: -0.216666666666667, count: 5.0 },
        { latitude: 6.1319, longitude: 1.2228, count: 1.0 },
        { latitude: 6.4500, longitude: 3.4000, count: 10.0 },
        { latitude: 9.0555555555556, longitude: 7.4913888888889, count: 5.0 },
        { latitude: 9.5170602, longitude: -13.6998434, count: 1.0 },
        { latitude: 10.4386215, longitude: 45.0134007, count: 1.0 },
        { latitude: 11.60047, longitude: 43.150829, count: 1.0 },
        { latitude: 14.716667, longitude: -17.266667, count: 1.0 },
        { latitude: 14.723888888889, longitude: -17.489166666667, count: 1.0 },
        { latitude: 15.60308, longitude: 32.52654, count: 1.0 },
        { latitude: 29.987, longitude: 31.2118, count: 5.0 },
        { latitude: 30.0444, longitude: 31.2358, count: 5.0 },
        { latitude: 31.05, longitude: 31.383333333333, count: 1.0 },
        { latitude: 32.896672, longitude: 13.1777923, count: 1.0 },
        { latitude: 33.599166666667, longitude: -7.62, count: 1.0 },
        { latitude: 35.696944444444, longitude: -0.63305555555556, count: 1.0 },
        { latitude: 35.7766666666667, longitude: -5.80388888888889, count: 2.0 },
        { latitude: 35.833333333333, longitude: 10.633333333333, count: 1.0 },
        { latitude: 36.68083333, longitude: 2.90638889, count: 2.0 },
        { latitude: 36.766666666667, longitude: 2.95, count: 1.0 },
        { latitude: 36.800833333333, longitude: 10.18, count: 1.0 },
    ];
    map.on('load', function() {
        var minRadius = 2; // Set your minimum radius
        var maxRadius = 25; // Set your maximum radius

        datacenterCounts.forEach(function(datacenter) {
        var radius = datacenter.count * 3; // Adjust the multiplier as needed
        radius = Math.max(minRadius, Math.min(maxRadius, radius)); // Ensure radius is within the range


            map.addLayer({
                'id': 'circle' + datacenter.latitude + datacenter.longitude,
                'type': 'circle',
                'source': {
                    'type': 'geojson',
                    'data': {
                        'type': 'Feature',
                        'geometry': {
                            'type': 'Point',
                            'coordinates': [datacenter.longitude, datacenter.latitude]
                        }
                    }
                },
                'paint': {
                    'circle-radius': radius,
                    'circle-color': '#FF7B19'
                }
            });
        });
    })

    </script>
</body>
</html>